<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Music List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üéµ –ú–æ–π –ø–ª–µ–π–ª–∏—Å—Ç</h1>
        
        <div id="statsContainer" class="stats"></div>
        
        <ul id="tracksContainer" class="tracks-list"></ul>
    </div>

    <script>
        // –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö - –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Ç—Ä–µ–∫–æ–≤
        const tracksData = [
            {
                "added_at": "2025-04-11T17:55:44Z",
                "track": {
                    "album": {
                        "album_type": "single",
                        "artists": [
                            {
                                "external_urls": {
                                    "spotify": "https://open.spotify.com/artist/4Pi9tjQs6ThpAowRnw65Uh"
                                },
                                "href": "https://api.spotify.com/v1/artists/4Pi9tjQs6ThpAowRnw65Uh",
                                "id": "4Pi9tjQs6ThpAowRnw65Uh",
                                "name": "iskrit",
                                "type": "artist",
                                "uri": "spotify:artist:4Pi9tjQs6ThpAowRnw65Uh"
                            },
                            {
                                "external_urls": {
                                    "spotify": "https://open.spotify.com/artist/1zz7w3LGBIbE2mzoSsPea7"
                                },
                                "href": "https://api.spotify.com/v1/artists/1zz7w3LGBIbE2mzoSsPea7",
                                "id": "1zz7w3LGBIbE2mzoSsPea7",
                                "name": "ioneweb",
                                "type": "artist",
                                "uri": "spotify:artist:1zz7w3LGBIbE2mzoSsPea7"
                            }
                        ],
                        "external_urls": {
                            "spotify": "https://open.spotify.com/album/6iy4YhhNfNyR39bFV1isaE"
                        },
                        "href": "https://api.spotify.com/v1/albums/6iy4YhhNfNyR39bFV1isaE",
                        "id": "6iy4YhhNfNyR39bFV1isaE",
                        "images": [
                            {
                                "height": 640,
                                "width": 640,
                                "url": "https://i.scdn.co/image/ab67616d0000b2736f51139efce47d2e01da8052"
                            },
                            {
                                "height": 300,
                                "width": 300,
                                "url": "https://i.scdn.co/image/ab67616d00001e026f51139efce47d2e01da8052"
                            },
                            {
                                "height": 64,
                                "width": 64,
                                "url": "https://i.scdn.co/image/ab67616d000048516f51139efce47d2e01da8052"
                            }
                        ],
                        "name": "–ø–ª–æ—Ö–æ—Ö–æ—Ä–æ—à–æ",
                        "release_date": "2024-03-22",
                        "release_date_precision": "day",
                        "total_tracks": 1,
                        "type": "album",
                        "uri": "spotify:album:6iy4YhhNfNyR39bFV1isaE"
                    },
                    "artists": [
                        {
                            "external_urls": {
                                "spotify": "https://open.spotify.com/artist/4Pi9tjQs6ThpAowRnw65Uh"
                            },
                            "href": "https://api.spotify.com/v1/artists/4Pi9tjQs6ThpAowRnw65Uh",
                            "id": "4Pi9tjQs6ThpAowRnw65Uh",
                            "name": "iskrit",
                            "type": "artist",
                            "uri": "spotify:artist:4Pi9tjQs6ThpAowRnw65Uh"
                        },
                        {
                            "external_urls": {
                                "spotify": "https://open.spotify.com/artist/1zz7w3LGBIbE2mzoSsPea7"
                            },
                            "href": "https://api.spotify.com/v1/artists/1zz7w3LGBIbE2mzoSsPea7",
                            "id": "1zz7w3LGBIbE2mzoSsPea7",
                            "name": "ioneweb",
                            "type": "artist",
                            "uri": "spotify:artist:1zz7w3LGBIbE2mzoSsPea7"
                        }
                    ],
                    "disc_number": 1,
                    "duration_ms": 179792,
                    "explicit": false,
                    "external_ids": {
                        "isrc": "QM4TX2438981"
                    },
                    "external_urls": {
                        "spotify": "https://open.spotify.com/track/3Kr8E3SeLoYEMmqef2BBEq"
                    },
                    "href": "https://api.spotify.com/v1/tracks/3Kr8E3SeLoYEMmqef2BBEq",
                    "id": "3Kr8E3SeLoYEMmqef2BBEq",
                    "is_local": false,
                    "is_playable": true,
                    "name": "–ø–ª–æ—Ö–æ—Ö–æ—Ä–æ—à–æ",
                    "popularity": 30,
                    "preview_url": null,
                    "track_number": 1,
                    "type": "track",
                    "uri": "spotify:track:3Kr8E3SeLoYEMmqef2BBEq"
                }
            }
            // –°—é–¥–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç—Ä–µ–∫–æ–≤
        ];

        function formatDuration(ms) {
            const minutes = Math.floor(ms / 60000);
            const seconds = Math.floor((ms % 60000) / 1000);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function formatTotalDuration(totalMs) {
            const hours = Math.floor(totalMs / 3600000);
            const minutes = Math.floor((totalMs % 3600000) / 60000);
            
            if (hours > 0) {
                return `${hours} —á ${minutes} –º–∏–Ω`;
            }
            return `${minutes} –º–∏–Ω`;
        }

        function createTrackItem(trackData, index) {
            const track = trackData.track;
            const album = track.album;
            
            const listItem = document.createElement('li');
            listItem.className = 'track-item';
            listItem.style.animationDelay = (index * 0.1) + 's';

            const albumImage = album.images && album.images.length > 0 
                ? album.images[2]?.url || album.images[1]?.url || album.images[0]?.url 
                : 'https://via.placeholder.com/64x64/666/fff?text=‚ô™';

            const artists = track.artists.map(artist => artist.name).join(', ');

            const isMobile = window.innerWidth <= 768;

            listItem.innerHTML = `
                <div class="track-number">${index + 1}</div>
                <div class="track-main">
                    <img src="${albumImage}" alt="${album.name}" class="album-art" loading="lazy">
                    <div class="track-info">
                        <div class="track-name">${track.name}</div>
                        <div class="track-artists">${artists}</div>
                        <div class="track-album">${album.name}</div>
                    </div>
                </div>
                <div class="track-meta">
                    <div class="duration">${formatDuration(track.duration_ms)}</div>
                    <div class="popularity">‚ô™ ${track.popularity}</div>
                </div>
                <button class="play-button" onclick="openSpotify('${track.external_urls.spotify}')">
                    ‚ñ∂Ô∏è
                </button>
            `;

            listItem.addEventListener('click', (e) => {
                if (!e.target.classList.contains('play-button')) {
                    openSpotify(track.external_urls.spotify);
                }
            });

            return listItem;
        }

        function createStats(tracks) {
            const totalTracks = tracks.length;
            const totalDuration = tracks.reduce((sum, trackData) => 
                sum + trackData.track.duration_ms, 0
            );

            return `
                <div class="total-tracks">–¢—Ä–µ–∫–æ–≤: ${totalTracks}</div>
                <div class="total-duration">–û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${formatTotalDuration(totalDuration)}</div>
            `;
        }

        function openSpotify(url) {
            window.open(url, '_blank');
        }

        function renderTracks(tracks) {
            const container = document.getElementById('tracksContainer');
            const statsContainer = document.getElementById('statsContainer');
            
            if (!tracks || tracks.length === 0) {
                container.innerHTML = '<li class="no-tracks">–¢—Ä–µ–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</li>';
                statsContainer.innerHTML = '';
                return;
            }

            statsContainer.innerHTML = createStats(tracks);
            container.innerHTML = '';
            
            tracks.forEach((trackData, index) => {
                const listItem = createTrackItem(trackData, index);
                container.appendChild(listItem);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            renderTracks(tracksData);
        });

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        window.updateTracks = function(newTracksData) {
            renderTracks(newTracksData);
        };

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
        window.addEventListener('resize', () => {
            renderTracks(tracksData);
        });
    </script>
</body>
</html>